---
import Layout from '../layouts/Layout.astro';
---

<div class="bg-blue-800 flex flex-col items-center justify-center w-full h-full">

    <form method="post" action="" class="w-[30%] bg-amber-500 flex flex-col gap-y-5">
        <h1>LOGIN</h1>
        <input name="aaa" class="bg-amber-50 border-2" type="text" placeholder="Nombre de usuario">
        <input name="bbb" class="bg-amber-50 border-2" type="password" placeholder="contrasenia">
        <button class="bg-amber-300" type="submit">Iniciar Sesion</button>


    </form>

</div>

<script>
const form = document.querySelector('form');

if (form) { 
    form.addEventListener('submit', async (event) => {
        event.preventDefault();

        const formData = new FormData(form)

        try {
            const response = await fetch(new URL('http://localhost:8081/create-user'), {
                method: 'POST',
                body: formData,
            });
            if (response.ok) {
                const result = await response.json();
                form.reset();
            } else {
                const error = await response.json();
                throw new Error(error.message || 'Error al enviar el formulario');
            }
        } catch {
        }
    });
}


</script>
